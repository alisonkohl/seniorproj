<script>
	var movieString = "{{movieString}}";
	var index = {{index}};
	var adjustedMovieString = unescapeHtml(movieString);
	var movieStringArr = adjustedMovieString.split(";");
	var sizeOfMoviesArray = movieStringArr.length - 1;
	var titles = new Array();
	var aggregateRatings = new Array();
	var years = new Array();
	var runtimes = new Array();
	var allGenres = new Array();
	var synopses = new Array();
	var directors = new Array();
	var writers = new Array();
	var actors = new Array();
	var thumbnails = new Array();
	for (var a = 0; a < movieStringArr.length - 1; a++) {
		var currMovieInfo = movieStringArr[a];
		var currMovieInfoArr = currMovieInfo.split("*");
		titles.push(decodeURI(currMovieInfoArr[0]));
		aggregateRatings.push(decodeURI(currMovieInfoArr[1]));
		years.push(decodeURI(currMovieInfoArr[2]));
		runtimes.push(decodeURI(currMovieInfoArr[3]));
		allGenres.push(decodeURI(currMovieInfoArr[4]));
		synopses.push(decodeURI(currMovieInfoArr[5]));
		directors.push(decodeURI(currMovieInfoArr[6]));
		writers.push(decodeURI(currMovieInfoArr[7]));
		actors.push(decodeURI(currMovieInfoArr[8]));
		thumbnails.push(decodeURI(currMovieInfoArr[9]));
	}

	function unescapeHtml(safe) {
    	return $('<div />').html(safe).text();
	}
</script>

<center>
	<div id="window">
		<!-- <h1 style="margin-top:30px; margin-bottom:30px;">{{title}}</h1> -->
		<script>
			$("#watchMovieRating").val(aggregateRatings[index]);
			$("#watchMovieYear").val(years[index]);
			$("#watchMovieTitle").val(titles[index]);
			$("#watchMovieThumbnail").val(thumbnails[index]);
			$("#watchMovieGenres").val(allGenres[index]);
			var title = document.createElement("h1");
			title.id = "title";
			title.innerHTML = titles[index];
			document.getElementById("window").appendChild(title);
		</script>
		<!--<a role="button" href="/findmovie" class="btn btn-default" style="float:left; margin-top:80px;">
			<span class="glyphicon glyphicon-chevron-left" aria-hidden="true" style="font-size:30px;">
		</a>
		<img src="{{thumbnail}}" height="220px"></img>
		<a role="button" href="/findmovie" class="btn btn-default" style="float:right; margin-top:80px;">
			<span class="glyphicon glyphicon-chevron-right" aria-hidden="true" style="font-size:30px;">
		</a>-->

		<!-- <form action="/findmovie" method="POST" style="display:inline-block; margin:auto;">
			<div class="form-group">
				<input type="hidden" value="{{index}}" name="index"></input>
				<input type="hidden" value="{{movieString}}" name="movieString"></input>
				<input type="hidden" value="{{movieRating}}" name="movieRating"></input>
				<input type="hidden" value=-1 name="increment"></input>
			</div>
			<button type="submit" class="btn btn-default btn-lg" style="margin:8px;" style="float:left; margin-top:80px;">
				<span class="glyphicon glyphicon-chevron-left" aria-hidden="true" style="font-size:30px;">
			</button>
		</form> -->

		<span class="glyphicon glyphicon-chevron-left" aria-hidden="true" style="font-size:30px;" id="leftbutton"></span>
		<script>
			$("#leftbutton").click(function() {
				if (index == 0) {
					index = sizeOfMoviesArray - 1;
				} else {
					index--;
				}
				$("#watchMovieRating").val(aggregateRatings[index]);
				$("#watchMovieYear").val(years[index]);
				$("#watchMovieTitle").val(titles[index]);
				$("#watchMovieThumbnail").val(thumbnails[index]);
				$("#watchMovieGenres").val(allGenres[index]);
				var poster = document.getElementById("poster");
				poster.src = thumbnails[index];
				var title = document.getElementById("title");
				title.innerHTML = titles[index];
			});
		</script>

		<!-- <img src="{{thumbnail}}" height="220px"></img> -->
		<script>
			var poster = document.createElement("img");
			poster.id = "poster";
			poster.src = thumbnails[index];
			poster.style.height = '220px';
			document.getElementById("window").appendChild(poster);
		</script>
<!-- 		<form action="/findmovie" method="POST" style="display:inline-block; margin:auto;">
			<div class="form-group">
				<input type="hidden" value="{{index}}" name="index"></input>
				<input type="hidden" value="{{movieString}}" name="movieString"></input>
				<input type="hidden" value="{{movieRating}}" name="movieRating"></input>
				<input type="hidden" value=1 name="increment"></input>
			</div>
			<button type="submit" class="btn btn-default btn-lg" style="margin:8px;" style="float:right; margin-top:80px;">
				<span class="glyphicon glyphicon-chevron-right" aria-hidden="true" style="font-size:30px;">
			</button>
		</form> -->
		<span class="glyphicon glyphicon-chevron-right" aria-hidden="true" style="font-size:30px;" id="rightbutton"></span>
		<script>
			$("#rightbutton").click(function() {
				if (index == sizeOfMoviesArray - 1) {
					index = 0;
				} else {
					index++;
				}
				$("#watchMovieRating").val(aggregateRatings[index]);
				$("#watchMovieYear").val(years[index]);
				$("#watchMovieTitle").val(titles[index]);
				$("#watchMovieThumbnail").val(thumbnails[index]);
				$("#watchMovieGenres").val(allGenres[index]);
				var poster = document.getElementById("poster");
				poster.src = thumbnails[index];
				var title = document.getElementById("title");
				title.innerHTML = titles[index];
			});
		</script>

		<br/>
		<form action="/rateonemovie" method="POST" style="display:inline-block; margin:auto;">
			<div class="form-group">
				<!-- <input type="hidden" value="{{index}}" name="index"></input> -->
				<!-- <input type="hidden" value="{{movieString}}" name="movieString"></input> -->
				<input id="watchMovieRating" type="hidden" name="movieRating"></input>
				<input id="watchMovieYear" type="hidden" name="year"></input>
				<input id="watchMovieTitle" type="hidden" name="title"></input>
				<input id="watchMovieThumbnail" type="hidden" name="thumbnail"></input>
				<!-- <input id="watchMovieMid" type="hidden" value="{{mid}}" name="mid"></input> -->
				<input id="watchMovieGenres" type="hidden" name="genres"></input>
			</div>
			<button type="submit" class="btn btn-default btn-lg" style="margin:8px;" style="float:left; margin-top:80px;">
				<span class="glyphicon glyphicon-film" aria-hidden="true" style="font-size:30px;"></span>
				<br/>
				Watch This Movie
			</button>
		</form>
		<form action="/rateonemovieandgoback" method="POST" style="display:inline-block; margin:auto;">
			<div class="form-group">
				<input type="hidden" value="{{index}}" name="index"></input>
				<input type="hidden" value="{{movieString}}" name="movieString"></input>
				<input type="hidden" value="{{movieRating}}" name="movieRating"></input>
				<input type="hidden" value="{{year}}" name="year"></input>
				<input type="hidden" value="{{title}}" name="title"></input>
				<input type="hidden" value="{{thumbnail}}" name="thumbnail"></input>
				<input type="hidden" value="{{mid}}" name="mid"></input>
				<input type="hidden" value="{{genres}}" name="genres"></input>
			</div>
			<button type="submit" class="btn btn-default btn-lg" style="margin:8px;" style="float:left; margin-top:80px;">
				<span class="glyphicon glyphicon-film" aria-hidden="true" style="font-size:30px;"></span>
				<br/>
				Rate This Movie
			</button>
		</form>
	</div>
	<script type="text/javascript" src="javascripts/swipe.js"/>
</center>